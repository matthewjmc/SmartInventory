<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdn.socket.io/3.1.3/socket.io.min.js" integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>
    <script> 
        function postborrow(){
            $.post({
                type: "POST",
                url: "/stockborrow",
            })
        }
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>stock borrow</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css')}}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Features-Boxed.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Login-Form-Clean.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css')}}">
</head>

<body>
    <section class="login-clean" style="background: rgb(247,148,30);">
        <section class="features-boxed" style="background: rgb(255,255,255);height: 799.667px;">
            <div class="container">
                <div class="intro" style="height: 119px;">
                    <h2 class="text-center" style="height: 77px;">
                        <a href="/inventorystart">
                        <img src="static/img/unnamed.png" style="height: 61px;color: rgb(244,121,32);">
                    </a>&nbsp;BORROW</h2>
                    <p class="text-center">Scan the item you want to borrow.</p>
                </div>
                <div class="row justify-content-center features">
                    <div class="col">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Stock ID</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-md-4 offset-lg-4" style="height: 75px;">
                    <a class="btn btn-primary btn-block" role="button" href="/inventorystart" onclick="postborrow()" style="height: 35px;text-align: center;font-size: 15px;font-family: 'Source Sans Pro', sans-serif;margin: 16px 0px 0px;padding: 2px;background: rgb(252,176,64);">
                            DONE
                    </a>
                    </div>
                </div>
            </div>
        </section>
        <div class="col">
            <div></div>
        </div>
    </section>
    <script src="static/js/jquery.min.js"></script>
    <script src="static/bootstrap/js/bootstrap.min.js"></script>

    <script>
        const url = 'http://localhost:5000'
        const socket = io(url);
        socket.on('borrowdata', (data) => {
            let items = [data];
            
            
            function generateTable(table, data) {
                console.log(data)
                for (let element of data) {
                    let row = table.insertRow();
                    for (key in element) {
                        let cell = row.insertCell();
                        let text = document.createTextNode(element[key]);
                        cell.appendChild(text);
                    }
                }
            }                
            let table = document.querySelector("table.table");
            
            generateTable(table, items);
            
            
        })
    </script>
</body>

</html>